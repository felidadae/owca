loggers:
  wca.scheduler.server: INFO
  wca.scheduler.algorithms: TRACE
kubeapi: &kubeapi !Kubeapi
  host: !Env KUBERNETES_SERVICE_HOST
  port: !Env KUBERNETES_SERVICE_PORT
# reschedule_interval: 5
algorithm: !Score
  score_target: -2.0
  max_node_score: 10000.
  dimensions:
    - mem
    - cpu
    - membw_write
    - membw_read
    - wss
  cpu_scale_factor: 0.9
  data_provider: !ClusterScoreDataProvider
    kubeapi: *kubeapi
    prometheus: !Prometheus
      host: http://100.64.176.36
      port: 30900
      timeout: 5.0
      time: "1589559381"  # Date: 2020-05-15 16:16:21.308265 Timestamp
    queries: !Queries
      APP_REQUESTED_RESOURCES_QUERY_MAP:
            cpu: 'app_cpu'
            mem: 'app_mem'
            membw_read: 'app_mbw_read'
            membw_write: 'app_mbw_write'
            wss: 'app_wss'
      MEMBW_CAPACITY_READ: 'ceil(sum(platform_nvdimm_read_bandwidth_bytes_per_second) by (nodename) / 1e9)*0.7'
      MEMBW_CAPACITY_WRITE: 'ceil(sum(platform_nvdimm_write_bandwidth_bytes_per_second) by (nodename) / 1e9)*0.7'
      NODES_PMM_MEMORY_MODE: 'sum(platform_mem_mode_size_bytes) by (nodename) != 0'
      NODE_CAPACITY_MEM_WSS: '(sum(platform_dimm_total_size_bytes{dimm_type="ram"}) by (nodename) / 1e9)*0.3'
      NODE_CAPACITY_DRAM_MEMBW: 'ceil(platform_dimm_speed_bytes_per_second / 1e9)'
